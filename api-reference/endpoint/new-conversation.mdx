# New Conversation

> The new conversation endpoint lets you start a new AI-powered conversation for DeFi search and analysis powered by Thesis. 

By default, it automatically uses the Chat mode, which only includes Web Search capabilities. Enable Deep Research mode to use the full capabilities of Thesis Deep AI with DeFi tools.

## OpenAPI

````yaml post /api/v1/integration/conversations
paths:
  path: /api/v1/integration/conversations
  method: post
  servers:
    - url: https://app-be.thesis.io
  request:
    security:
      - title: apikey
        parameters:
          query: {}
          header:
            Authorization:
              type: apiKey
              description: >-
                API key must be provided via Authorization header with Bearer scheme. Format: `Bearer YOUR_API_KEY`
          cookie: {}
    parameters:
      path: {}
      query: {}
      header: {}
      cookie: {}
    body:
      application/json:
        schemaArray:
          - type: object
            properties:
              initial_user_msg:
                allOf:
                  - type: string
                    description: The initial message provided by the user to start the conversation. This is the primary input that initiates the conversation flow.
                    example: "Hello, I need help with my account."
                    default: ""
              research_mode:
                allOf:
                  - type: string
                    enum:
                      - chat
                      - deep_research
                    description: >-
                      Specifies the mode of research for the conversation. 'chat' uses default processing, 'deep_research' enables more thorough analysis.
                    example: deep_research
                    default: chat
              space_id:
                allOf:
                  - type: integer
                    description: Identifier for the space where the conversation is created. Spaces are used to organize conversations within the system.
                    example: 123
                    default: 0
              space_section_id:
                allOf:
                  - type: integer
                    description: Identifier for the section within the space where the conversation is created. Sections allow further categorization within a space.
                    example: 456
                    default: 0
              thread_follow_up:
                allOf:
                  - type: integer
                    description: Indicates if this is a follow-up message in an existing thread. A value of 0 indicates a new thread, while non-zero values reference an existing thread.
                    example: 0
                    default: 0
              followup_discover_id:
                allOf:
                  - type: string
                    description: Identifier for follow-up discovery, used to link this conversation to a previous discovery process if applicable.
                    example: "abc123"
                    default: ""
              mcp_disable:
                allOf:
                  - type: object
                    properties:
                      additionalProp1:
                        type: boolean
                        description: Flag to disable a specific feature (e.g., feature 1) in the conversation processing pipeline.
                        example: true
                        default: false
                      additionalProp2:
                        type: boolean
                        description: Flag to disable a specific feature (e.g., feature 2) in the conversation processing pipeline.
                        example: false
                        default: false
                      additionalProp3:
                        type: boolean
                        description: Flag to disable a specific feature (e.g., feature 3) in the conversation processing pipeline.
                        example: true
                        default: false
                    description: Configuration object to disable specific features or settings in the conversation processing pipeline.
              system_prompt:
                allOf:
                  - type: string
                    description: The system prompt to guide the behavior of the conversation. This sets the context or tone for the assistant's responses.
                    example: "You are a helpful assistant."
                    default: ""
              image_urls:
                allOf:
                  - type: array
                    items:
                      type: string
                    description: List of URLs pointing to images relevant to the conversation. These can be used to provide visual context or attachments.
                    example:
                      - "https://example.com/image1.jpg"
            required: true
            refIdentifier: '#/components/schemas/CreatNewConversationIntegrationRequest'
            requiredProperties:
              - initial_user_msg
              - research_mode
              - space_id
              - space_section_id
        examples:
          example:
            value:
              initial_user_msg: "Hello, I need help with my account."
              research_mode: "deep_research"
              space_id: 123
              space_section_id: 456
              thread_follow_up: 0
              followup_discover_id: "abc123"
              mcp_disable:
                additionalProp1: true
                additionalProp2: false
                additionalProp3: true
              system_prompt: "You are a helpful assistant."
              image_urls:
                - "https://example.com/image1.jpg"
    codeSamples:
      - label: Create a new conversation
        lang: bash
        source: |
          curl -X POST 'https://api.example.com/api/v1/integration/conversations' \
            -H 'Authorization: Bearer YOUR_API_KEY' \
            -H 'Content-Type: application/json' \
            -d '{
              "initial_user_msg": "Hello, I need help with my account.",
              "research_mode": "deep_research",
              "space_id": 123,
              "space_section_id": 456,
              "thread_follow_up": 0,
              "followup_discover_id": "abc123",
              "mcp_disable": {
                "additionalProp1": true,
                "additionalProp2": false,
                "additionalProp3": true
              },
              "system_prompt": "You are a helpful assistant.",
              "image_urls": ["https://example.com/image1.jpg"]
            }'
  response:
    '200':
      application/json:
        schemaArray:
          - type: object
            properties:
              conversation_id:
                allOf:
                  - type: string
                    description: The unique identifier for the newly created conversation.
                    example: "conv_789xyz"
              status:
                allOf:
                  - type: string
                    description: The status of the conversation creation request.
                    example: "success"
            required:
              - conversation_id
              - status
        examples:
          example:
            value:
              conversation_id: "conv_789xyz"
              status: "success"
        description: OK
    '422':
      application/json:
        schemaArray:
          - type: object
            properties:
              detail:
                allOf:
                  - type: array
                    items:
                      type: object
                      properties:
                        loc:
                          type: array
                          items:
                            type: string
                          description: The location of the validation error (e.g., field in the body).
                          example:
                            - "body"
                            - "initial_user_msg"
                        msg:
                          type: string
                          description: The error message describing the validation issue.
                          example: "field required"
                        type:
                          type: string
                          description: The type of validation error.
                          example: "value_error.missing"
            description: Schema for validation error responses, detailing the location and type of errors encountered in the request.
        examples:
          example:
            value:
              detail:
                - loc:
                    - "body"
                    - "initial_user_msg"
                  msg: "field required"
                  type: "value_error.missing"
        description: Validation Error
  deprecated: false
  type: path
components:
  schemas:
    CreatNewConversationIntegrationRequest:
      type: object
      properties:
        initial_user_msg:
          type: string
          description: The initial message provided by the user to start the conversation. This is the primary input that initiates the conversation flow.
          example: "Hello, I need help with my account."
          default: ""
        research_mode:
          type: string
          enum:
            - standard
            - deep
            - fast
          description: >-
            Specifies the mode of research for the conversation. 'standard' uses default processing, 'deep' enables more thorough analysis, and 'fast' prioritizes speed.
          example: standard
          default: standard
        space_id:
          type: integer
          description: Identifier for the space where the conversation is created. Spaces are used to organize conversations within the system.
          example: 123
          default: 0
        space_section_id:
          type: integer
          description: Identifier for the section within the space where the conversation is created. Sections allow further categorization within a space.
          example: 456
          default: 0
        thread_follow_up:
          type: integer
          description: Indicates if this is a follow-up message in an existing thread. A value of 0 indicates a new thread, while non-zero values reference an existing thread.
          example: 0
          default: 0
        followup_discover_id:
          type: string
          description: Identifier for follow-up discovery, used to link this conversation to a previous discovery process if applicable.
          example: "abc123"
          default: ""
        mcp_disable:
          type: object
          properties:
            additionalProp1:
              type: boolean
              description: Flag to disable a specific feature (e.g., feature 1) in the conversation processing pipeline.
              example: true
              default: false
            additionalProp2:
              type: boolean
              description: Flag to disable a specific feature (e.g., feature 2) in the conversation processing pipeline.
              example: false
              default: false
            additionalProp3:
              type: boolean
              description: Flag to disable a specific feature (e.g., feature 3) in the conversation processing pipeline.
              example: true
              default: false
          description: Configuration object to disable specific features or settings in the conversation processing pipeline.
        system_prompt:
          type: string
          description: The system prompt to guide the behavior of the conversation. This sets the context or tone for the assistant's responses.
          example: "You are a helpful assistant."
          default: ""
        image_urls:
          type: array
          items:
            type: string
          description: List of URLs pointing to images relevant to the conversation. These can be used to provide visual context or attachments.
          example:
            - "https://example.com/image1.jpg"
      required:
        - initial_user_msg
        - research_mode
        - space_id
        - space_section_id
      description: Schema for creating a new conversation via the integration endpoint.
    HTTPValidationError:
      type: object
      properties:
        detail:
          type: array
          items:
            type: object
            properties:
              loc:
                type: array
                items:
                  type: string
              msg:
                type: string
              type:
                type: string
      description: Schema for validation error responses, detailing the location and type of errors.
````